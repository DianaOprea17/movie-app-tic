{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"navbar\"\n};\nconst _hoisted_2 = {\n  class: \"nav-logo\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  class: \"nav-title\"\n};\nconst _hoisted_5 = {\n  class: \"nav-link\"\n};\nconst _hoisted_6 = {\n  class: \"menu\"\n};\nconst _hoisted_7 = {\n  class: \"menu-dropdown\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"nav\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"img\", {\n    src: $data.logo,\n    alt: \"logo\",\n    class: \"logo-image\"\n  }, null, 8 /* PROPS */, _hoisted_3)]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.username ? `${_ctx.username}'s Movie List` : \"Your Movie List\"), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = _withModifiers((...args) => $options.toggleMenu && $options.toggleMenu(...args), [\"stop\"])),\n    class: \"menu-btn\"\n  }, \" Menu\"), _withDirectives(_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => _ctx.toggleForm && _ctx.toggleForm(...args)),\n    class: \"nav-btn\"\n  }, \"Add New Movie\"), _createVNode(_component_router_link, {\n    to: \"/profile\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createElementVNode(\"button\", {\n      class: \"nav-btn\",\n      to: \"/profile\"\n    }, \"Profile\", -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.signoutuser && $options.signoutuser(...args)),\n    class: \"nav-btn\"\n  }, \" Sign out\")], 512 /* NEED_PATCH */), [[_vShow, _ctx.isMenuVisible]])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","src","$data","logo","alt","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","_ctx","username","_hoisted_6","onClick","_cache","_withModifiers","args","$options","toggleMenu","_hoisted_7","toggleForm","_createVNode","_component_router_link","to","default","_withCtx","_","type","signoutuser","isMenuVisible"],"sources":["D:\\facultate\\mastrer\\movie-app-tic\\front\\client\\src\\components\\UserProfile.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <nav class=\"navbar\">\r\n        <div class=\"nav-logo\">\r\n          <img :src=\"logo\" alt=\"logo\" class=\"logo-image\">\r\n          \r\n        </div>\r\n\r\n        <div class=\"nav-title\">\r\n        <span class=\"nav-link\">{{ username ? `${username}'s Movie List` : \"Your Movie List\" }}</span>\r\n      </div>\r\n\r\n      <div class=\"menu\">\r\n        <button @click.stop=\"toggleMenu\" class=\"menu-btn\"> Menu</button>\r\n        <div v-show=\"isMenuVisible\" class=\"menu-dropdown\">\r\n            <button @click=\"toggleForm\" class=\"nav-btn\">Add New Movie</button>\r\n            <router-link to=\"/profile\">\r\n          <button class=\"nav-btn\" to=\"/profile\">Profile</button>\r\n        </router-link>\r\n          <button type = button v-on:click=\"signoutuser\" class=\"nav-btn\"> Sign out</button>\r\n     \r\n          </div>\r\n        \r\n      </div>\r\n        \r\n      </nav>\r\n\r\n\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport logo from '@/assets/logoextinsalb.png';\r\nimport { signOut } from 'firebase/auth';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport {auth} from '../firebaseConfig';\r\nimport { getFirestore, collection, addDoc, serverTimestamp, updateDoc, doc} from \"firebase/firestore\";\r\nimport{ ref, uploadBytes, getDownloadURL} from 'firebase/storage';\r\nimport { storage } from '../firebaseConfig';\r\n\r\nconst db = getFirestore();\r\n\r\nexport default {\r\n  name: 'UserProfile',\r\n  data(){\r\n    return{\r\n      logo,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n  async signoutuser() {\r\n    console.log(\"Sign out button clicked\");\r\n    try {\r\n      await signOut(auth);\r\n      console.log(\"User signed out\");\r\n      this.$router.push('/');\r\n    } catch (error) {\r\n      console.error(\"Error signing out: \", error);\r\n    }\r\n  },\r\n\r\n    fetchUserName() {\r\n      const user = auth.currentUser;\r\n\r\n     if (user) {\r\n         fetch(`http://localhost:3000/user/${user.uid}`).then(response => response.json())\r\n            .then(data => {\r\n               console.log('User data fetched:', data);\r\n               this.username = data.firstName;\r\n             }).catch(error => {\r\n                console.error('Error fetching user:', error);\r\n                });\r\n  }\r\n    },\r\n\r\n    toggleMenu(event) {\r\n        event.stopPropagation(); \r\n        this.isMenuVisible = !this.isMenuVisible;\r\n    },\r\n    closeMenu() {\r\n      this.isMenuVisible = false;\r\n    }\r\n\r\n\r\n  },\r\n      \r\n  mounted() {\r\n    document.addEventListener('click', this.closeMenu);\r\n  },\r\n\r\n  beforeUnmount() {\r\n    document.removeEventListener('click', this.closeMenu);\r\n  }\r\n    \r\n\r\n};\r\n</script>\r\n\r\n<styles src=\"../styles/UserProfile.css\">\r\n\r\n</styles>"],"mappings":";;EAEaA,KAAK,EAAC;AAAQ;;EACdA,KAAK,EAAC;AAAU;mBAH7B;;EAQaA,KAAK,EAAC;AAAW;;EAChBA,KAAK,EAAC;AAAU;;EAGnBA,KAAK,EAAC;AAAM;;EAEaA,KAAK,EAAC;AAAe;;;uBAbrDC,mBAAA,CA4BM,cA3BFC,mBAAA,CAuBI,OAvBJC,UAuBI,GAtBJD,mBAAA,CAGM,OAHNE,UAGM,GAFJF,mBAAA,CAA+C;IAAzCG,GAAG,EAAEC,KAAA,CAAAC,IAAI;IAAEC,GAAG,EAAC,MAAM;IAACR,KAAK,EAAC;0BAJ5CS,UAAA,E,GAQQP,mBAAA,CAEI,OAFJQ,UAEI,GADJR,mBAAA,CAA6F,QAA7FS,UAA6F,EAAAC,gBAAA,CAAnEC,IAAA,CAAAC,QAAQ,MAAMD,IAAA,CAAAC,QAAQ,oD,GAGlDZ,mBAAA,CAWM,OAXNa,UAWM,GAVJb,mBAAA,CAAgE;IAAvDc,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAbtBC,cAAA,KAAAC,IAAA,KAa6BC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IAAEnB,KAAK,EAAC;KAAW,OAAK,G,gBACvDE,mBAAA,CAOQ,OAPRoB,UAOQ,GANJpB,mBAAA,CAAkE;IAAzDc,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEN,IAAA,CAAAU,UAAA,IAAAV,IAAA,CAAAU,UAAA,IAAAJ,IAAA,CAAU;IAAEnB,KAAK,EAAC;KAAU,eAAa,GACzDwB,YAAA,CAEUC,sBAAA;IAFGC,EAAE,EAAC;EAAU;IAhBtCC,OAAA,EAAAC,QAAA,CAiBU,MAAsDX,MAAA,QAAAA,MAAA,OAAtDf,mBAAA,CAAsD;MAA9CF,KAAK,EAAC,SAAS;MAAC0B,EAAE,EAAC;OAAW,SAAO,oB;IAjBvDG,CAAA;MAmBU3B,mBAAA,CAAiF;IAAzE4B,IAAI,EAAG,QAAM;IAAMd,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAW,WAAA,IAAAX,QAAA,CAAAW,WAAA,IAAAZ,IAAA,CAAW;IAAEnB,KAAK,EAAC;KAAU,WAAS,E,mCAL7Da,IAAA,CAAAmB,aAAa,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}