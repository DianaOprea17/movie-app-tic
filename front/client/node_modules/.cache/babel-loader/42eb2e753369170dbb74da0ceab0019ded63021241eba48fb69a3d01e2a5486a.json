{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport logo from '@/assets/logoextinsalb.png';\nimport { signOut } from 'firebase/auth';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from '../firebaseConfig';\nimport { getFirestore, collection, addDoc, serverTimestamp, updateDoc, doc } from \"firebase/firestore\";\nimport { ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\nimport { storage } from '../firebaseConfig';\nimport arrowUp from '../assets/up3.png';\nimport arrowDown from '../assets/down3.png';\nimport menuIcon from '../assets/menu-icon.png';\n//import Slider from Vue3Slider\nimport Vue3Slider from 'vue3-slider';\n//import {notify} from 'vue3-notification';\n\nconst db = getFirestore();\nexport default {\n  name: 'HomePage',\n  data() {\n    return {\n      logo,\n      arrowDown,\n      arrowUp,\n      menuIcon,\n      Vue3Slider,\n      movies: [],\n      isFormVisible: false,\n      isEditing: false,\n      isMenuVisible: false,\n      isVisble: false,\n      editedMovie: {},\n      newMovie: {\n        title: '',\n        genre: '',\n        date: '',\n        score: null,\n        details: '',\n        poster: null\n      },\n      currentDate: new Date().toISOString().split(\"T\")[0],\n      //data curenta\n      imagePreview: null,\n      username: null,\n      selectedMovie: null,\n      searched: '',\n      filteredMovies: [],\n      selectedFilter: '',\n      isFilterVisible: false,\n      sortType: 'asc'\n    };\n  },\n  created() {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        this.username = user.email;\n        this.fetchUserName(user.uid);\n        this.displayMovies();\n        console.log(\"User logged in:\", user.email);\n      } else {\n        console.log(\"No user logged in\");\n        this.$router.push('/');\n      }\n    });\n  },\n  methods: {\n    async signoutuser() {\n      console.log(\"Sign out button clicked\");\n      try {\n        await signOut(auth);\n        console.log(\"User signed out\");\n        this.$router.push('/');\n      } catch (error) {\n        console.error(\"Error signing out: \", error);\n      }\n    },\n    //close pt formular\n    toggleForm() {\n      this.newMovie = {\n        title: '',\n        genre: '',\n        date: '',\n        score: '',\n        details: '',\n        poster: null\n      };\n      this.imagePreview = null;\n      this.isFormVisible = !this.isFormVisible;\n    },\n    handleImageUpload(event, isEditing = false) {\n      const file = event.target.files[0];\n      if (file) {\n        const fileTypes = ['image/png', 'image/jpeg'];\n        if (!fileTypes.includes(file.type)) {\n          alert('Please upload a PNG or JPG file.');\n        }\n        if (isEditing) {\n          this.editedMovie.newPoster = file;\n          this.editedMovie.posterPreview = URL.createObjectURL(file);\n        } else {\n          this.imagePreview = URL.createObjectURL(file);\n          this.newMovie.poster = file;\n          console.log('Poster uploaded:', this.newMovie.poster);\n        }\n      } else {\n        console.error('No file selected or invalid file.');\n      }\n    },\n    fetchUserName() {\n      const user = auth.currentUser;\n      if (user) {\n        fetch(`http://localhost:3000/user/${user.uid}`).then(response => response.json()).then(data => {\n          console.log('User data fetched:', data);\n          this.username = data.firstName;\n        }).catch(error => {\n          console.error('Error fetching user:', error);\n        });\n      }\n    },\n    async addMovie() {\n      try {\n        if (!this.newMovie.poster || !(this.newMovie.poster instanceof File)) {\n          alert(\"Please upload a valid movie poster.\");\n          return;\n        }\n        if (this.newMovie.score < 0 || this.newMovie.score > 10) {\n          alert(\"The score must be between 0 and 10.\");\n          return;\n        }\n        if (this.newMovie.date > this.currentDate) {\n          alert(\"The date introduced cannot be in the future!\");\n          return;\n        }\n\n        //upload poster in storage\n        const posterRef = ref(storage, `posters/${this.newMovie.poster.name}`);\n        await uploadBytes(posterRef, this.newMovie.poster);\n        const posterURL = await getDownloadURL(posterRef);\n        const user = auth.currentUser;\n        await addDoc(collection(db, \"movies\"), {\n          movie: {\n            title: this.newMovie.title,\n            genre: this.newMovie.genre,\n            date: this.newMovie.date,\n            score: parseFloat(this.newMovie.score),\n            details: this.newMovie.details\n          },\n          posterURL,\n          user: {\n            uid: user.uid,\n            email: user.email\n          },\n          metadata: {\n            createdAt: serverTimestamp(),\n            updatedAt: serverTimestamp()\n          }\n        }).then(docRef => {\n          this.movies.push({\n            id: docRef.id,\n            title: this.newMovie.title,\n            genre: this.newMovie.genre,\n            date: this.newMovie.date,\n            score: parseFloat(this.newMovie.score),\n            details: this.newMovie.details,\n            posterURL: posterURL\n          });\n        });\n        console.log('Movie added successfully');\n        this.newMovie = {\n          title: '',\n          genre: '',\n          date: '',\n          score: '',\n          details: '',\n          poster: null\n        };\n        this.imagePreview = null;\n        this.isFormVisible = false;\n        alert(\"Movie added sucessfully\");\n      } catch (error) {\n        console.error(\"Error adding movie: \", error);\n      }\n    },\n    async displayMovies() {\n      try {\n        const user = auth.currentUser;\n        if (!user) {\n          console.log('No user logged in');\n          return;\n        }\n        const response = await fetch(`http://localhost:3000/movies?userEmail=${encodeURIComponent(user.email)}`);\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        const movies = await response.json();\n        console.log(\"Movies received:\", movies);\n        this.movies = movies.map(movie => ({\n          id: movie.id,\n          ...movie,\n          posterURL: movie.posterURL\n        }));\n        console.log(\"Processed movies:\", this.movies);\n        this.filteredMovies = this.movies;\n      } catch (error) {\n        console.error(\"Error displaying movies: \", error);\n      }\n    },\n    showMovieDetails(movie) {\n      this.selectedMovie = movie;\n    },\n    closeModal() {\n      this.selectedMovie = null;\n    },\n    formatDate(date) {\n      if (!date) return 'No date available';\n      try {\n        const options = {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        };\n        //'en-GB' este pentru zi/luna/an\n        return new Date(date).toLocaleDateString('en-GB', options);\n      } catch (error) {\n        return 'Invalid Date';\n      }\n    },\n    editMovie() {\n      this.isEditing = true;\n      this.editedMovie = {\n        ...this.selectedMovie\n      };\n    },\n    cancelMovie() {\n      this.isEditing = false;\n      this.selectedMovie = {\n        ...this.editedMovie\n      };\n    },\n    async saveMovieEdits() {\n      try {\n        if (!this.selectedMovie.id) return;\n        let posterURL = this.selectedMovie.posterURL;\n        if (this.editedMovie.newPoster) {\n          const oldPosterPath = decodeURIComponent(posterURL).split('/o/')[1].split('?')[0];\n          const oldPosterRef = ref(storage, oldPosterPath);\n          try {\n            await deleteObject(oldPosterRef);\n            console.log('Old poster deleted');\n          } catch (error) {\n            console.error('Error deleting old poster:', error);\n          }\n          const posterRef = ref(storage, `posters/${this.editedMovie.newPoster.name}`);\n          await uploadBytes(posterRef, this.editedMovie.newPoster);\n          posterURL = await getDownloadURL(posterRef);\n          const movieIndex = this.movies.findIndex(m => m.id === this.selectedMovie.id);\n          if (movieIndex !== -1) {\n            this.movies[movieIndex].posterURL = posterURL;\n          }\n          const filteredIndex = this.filteredMovies.findIndex(m => m.id === this.selectedMovie.id);\n          if (filteredIndex !== -1) {\n            this.filteredMovies[filteredIndex].posterURL = posterURL;\n          }\n        }\n        const movieRef = doc(db, \"movies\", this.selectedMovie.id);\n        await updateDoc(movieRef, {\n          \"movie.title\": this.editedMovie.title,\n          \"movie.genre\": this.editedMovie.genre,\n          \"movie.date\": this.editedMovie.date,\n          \"movie.score\": this.editedMovie.score,\n          \"movie.details\": this.editedMovie.details,\n          \"posterURL\": posterURL,\n          \"metadata.updatedAt\": serverTimestamp()\n        });\n        Object.assign(this.selectedMovie, {\n          ...this.editedMovie,\n          posterURL\n        });\n        this.isEditing = false;\n      } catch (error) {\n        console.error(\"Error updating movie:\", error);\n      }\n    },\n    async deleteMovie() {\n      if (!this.selectedMovie || !this.selectedMovie.id) {\n        console.error(\"No movie selected or invalid movie ID\");\n        return;\n      }\n      try {\n        if (!confirm(\"Are you sure you want to delete this movie?\")) {\n          return;\n        }\n        console.log(\"Attempting to delete movie with ID:\", this.selectedMovie.id);\n        const response = await fetch(`http://localhost:3000/movies/${this.selectedMovie.id}`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        console.log(\"Delete response status:\", response.status);\n        const responseData = await response.json();\n        if (!response.ok) {\n          alert(responseData.error || \"Failed to delete movie\");\n          return;\n        }\n        const index = this.movies.findIndex(movie => movie.id === this.selectedMovie.id);\n        if (index > -1) {\n          this.movies.splice(index, 1);\n        }\n        this.closeModal();\n        console.log('Movie deleted successfully');\n      } catch (error) {\n        console.error(\"Error deleting movie:\", error);\n        alert(\"Failed to delete movie. Please try again.\");\n      }\n    },\n    //search\n    searching() {\n      if (!this.searched) {\n        this.filteredMovies = [...this.movies];\n      } else {\n        const lowerCase = this.searched.toLowerCase();\n        this.filteredMovies = this.movies.filter(movie => movie.title.toLowerCase().includes(lowerCase));\n      }\n      if (this.sortType === 'desc') {\n        this.sortMovies();\n      }\n    },\n    //filter\n\n    toggleFilter() {\n      this.isFilterVisible = !this.isFilterVisible;\n    },\n    applyFilter() {\n      if (!this.selectedFilter) {\n        this.filteredMovies = this.movies;\n        return;\n      }\n      if (this.selectedFilter) {\n        this.filteredMovies = this.movies.filter(movie => movie.genre === this.selectedFilter);\n      }\n    },\n    toggleMenu(event) {\n      event.stopPropagation();\n      this.isMenuVisible = !this.isMenuVisible;\n    },\n    closeMenu() {\n      this.isMenuVisible = false;\n    },\n    sortMovies() {\n      this.sortType = this.sortType === 'asc' ? 'desc' : 'asc';\n      this.filteredMovies.sort((a, b) => {\n        const titleA = a.title.toLowerCase();\n        const titleB = b.title.toLowerCase();\n        if (this.sortType === 'asc') {\n          return titleA < titleB ? -1 : titleA > titleB ? 1 : 0;\n        } else {\n          return titleB < titleA ? -1 : titleB > titleA ? 1 : 0;\n        }\n      });\n    }\n  },\n  watch: {\n    searched() {\n      this.searching();\n    },\n    selectedFilter() {\n      this.applyFilter();\n    }\n  },\n  mounted() {\n    document.addEventListener('click', this.closeMenu);\n  },\n  beforeUnount() {\n    document.removeEventListener('click', this.closeMenu);\n  }\n};","map":{"version":3,"names":["logo","signOut","onAuthStateChanged","auth","getFirestore","collection","addDoc","serverTimestamp","updateDoc","doc","ref","uploadBytes","getDownloadURL","deleteObject","storage","arrowUp","arrowDown","menuIcon","Vue3Slider","db","name","data","movies","isFormVisible","isEditing","isMenuVisible","isVisble","editedMovie","newMovie","title","genre","date","score","details","poster","currentDate","Date","toISOString","split","imagePreview","username","selectedMovie","searched","filteredMovies","selectedFilter","isFilterVisible","sortType","created","user","email","fetchUserName","uid","displayMovies","console","log","$router","push","methods","signoutuser","error","toggleForm","handleImageUpload","event","file","target","files","fileTypes","includes","type","alert","newPoster","posterPreview","URL","createObjectURL","currentUser","fetch","then","response","json","firstName","catch","addMovie","File","posterRef","posterURL","movie","parseFloat","metadata","createdAt","updatedAt","docRef","id","encodeURIComponent","ok","Error","map","showMovieDetails","closeModal","formatDate","options","day","month","year","toLocaleDateString","editMovie","cancelMovie","saveMovieEdits","oldPosterPath","decodeURIComponent","oldPosterRef","movieIndex","findIndex","m","filteredIndex","movieRef","Object","assign","deleteMovie","confirm","method","headers","status","responseData","index","splice","searching","lowerCase","toLowerCase","filter","sortMovies","toggleFilter","applyFilter","toggleMenu","stopPropagation","closeMenu","sort","a","b","titleA","titleB","watch","mounted","document","addEventListener","beforeUnount","removeEventListener"],"sources":["D:/facultate/mastrer/movie-app-tic/front/client/src/components/HomePage.js"],"sourcesContent":["import logo from '@/assets/logoextinsalb.png';\r\nimport { signOut } from 'firebase/auth';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport {auth} from '../firebaseConfig';\r\nimport { getFirestore, collection, addDoc, serverTimestamp, updateDoc, doc} from \"firebase/firestore\";\r\nimport{ ref, uploadBytes, getDownloadURL, deleteObject} from 'firebase/storage';\r\nimport { storage } from '../firebaseConfig';\r\nimport arrowUp from '../assets/up3.png';\r\nimport arrowDown from '../assets/down3.png';\r\nimport menuIcon from '../assets/menu-icon.png';\r\n//import Slider from Vue3Slider\r\nimport Vue3Slider from 'vue3-slider';\r\n//import {notify} from 'vue3-notification';\r\n\r\nconst db = getFirestore();\r\n\r\nexport default {\r\n  name: 'HomePage',\r\n  data(){\r\n    return{\r\n      logo,\r\n      arrowDown,\r\n      arrowUp,\r\n      menuIcon,\r\n      Vue3Slider,\r\n      movies: [],\r\n      isFormVisible: false,\r\n      isEditing: false,\r\n      isMenuVisible: false,\r\n      isVisble: false,\r\n      editedMovie: {},\r\n      newMovie:{\r\n        title: '',\r\n        genre: '',\r\n        date: '',\r\n        score: null,\r\n        details: '',\r\n        poster: null,\r\n      },\r\n      currentDate: new Date().toISOString().split(\"T\")[0], //data curenta\r\n      imagePreview: null,\r\n      username: null,\r\n      selectedMovie: null,\r\n      searched: '',\r\n      filteredMovies:[],\r\n      selectedFilter: '',\r\n     \r\n      isFilterVisible: false,\r\n      sortType: 'asc',\r\n    };\r\n  },\r\n\r\n  created(){\r\n    \r\n    onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        this.username = user.email; \r\n        this.fetchUserName(user.uid);\r\n        this.displayMovies();\r\n        console.log(\"User logged in:\", user.email);\r\n      } else {\r\n        console.log(\"No user logged in\");\r\n        this.$router.push('/'); \r\n      }\r\n    });\r\n\r\n  },\r\n\r\n  methods: {\r\n  async signoutuser() {\r\n    console.log(\"Sign out button clicked\");\r\n    try {\r\n      await signOut(auth);\r\n      console.log(\"User signed out\");\r\n      this.$router.push('/');\r\n    } catch (error) {\r\n      console.error(\"Error signing out: \", error);\r\n    }\r\n  },\r\n  \r\n  //close pt formular\r\n  toggleForm(){\r\n    this.newMovie = { title: '', genre: '', date: '', score: '', details: '', poster: null };\r\n    this.imagePreview = null;\r\n    this.isFormVisible = !this.isFormVisible;\r\n\r\n  },\r\n\r\n  handleImageUpload(event, isEditing=false) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        const fileTypes = ['image/png', 'image/jpeg'];\r\n        if(!fileTypes.includes(file.type)){\r\n          alert('Please upload a PNG or JPG file.')\r\n        }\r\n\r\n        if(isEditing){\r\n          this.editedMovie.newPoster = file;\r\n          this.editedMovie.posterPreview  = URL.createObjectURL(file);\r\n        } else{\r\n          this.imagePreview = URL.createObjectURL(file);\r\n          this.newMovie.poster = file; \r\n          console.log('Poster uploaded:', this.newMovie.poster);\r\n        }\r\n        \r\n      }else {\r\n        console.error('No file selected or invalid file.');\r\n      }\r\n    },\r\n\r\n    fetchUserName() {\r\n      const user = auth.currentUser;\r\n\r\n     if (user) {\r\n         fetch(`http://localhost:3000/user/${user.uid}`).then(response => response.json())\r\n            .then(data => {\r\n               console.log('User data fetched:', data);\r\n               this.username = data.firstName;\r\n             }).catch(error => {\r\n                console.error('Error fetching user:', error);\r\n                });\r\n  }\r\n    },\r\n\r\n  async addMovie(){\r\n    try {\r\n        if (!this.newMovie.poster || !(this.newMovie.poster instanceof File)) {\r\n          alert(\"Please upload a valid movie poster.\");\r\n          return;\r\n        }\r\n\r\n        if(this.newMovie.score <0 || this.newMovie.score>10){\r\n          alert(\"The score must be between 0 and 10.\");\r\n          return;\r\n        }\r\n\r\n        if (this.newMovie.date > this.currentDate) {\r\n          alert(\"The date introduced cannot be in the future!\");\r\n          return;\r\n        }\r\n\r\n         //upload poster in storage\r\n        const posterRef = ref(storage, `posters/${this.newMovie.poster.name}`);\r\n        await uploadBytes(posterRef, this.newMovie.poster);\r\n        const posterURL = await getDownloadURL(posterRef);\r\n\r\n        const user = auth.currentUser;\r\n\r\n        await addDoc(collection(db, \"movies\"), {\r\n          movie:{\r\n            title: this.newMovie.title,\r\n            genre: this.newMovie.genre ,\r\n            date: this.newMovie.date,\r\n            score: parseFloat(this.newMovie.score),\r\n            details: this.newMovie.details\r\n          },\r\n          \r\n          posterURL,\r\n          user: {\r\n            uid: user.uid,\r\n            email: user.email,\r\n            \r\n          },\r\n          metadata: {\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          },\r\n        }).then((docRef) => {\r\n           this.movies.push({\r\n            id: docRef.id,\r\n            title: this.newMovie.title,\r\n            genre: this.newMovie.genre,\r\n            date: this.newMovie.date,\r\n            score: parseFloat(this.newMovie.score),\r\n            details: this.newMovie.details,\r\n            posterURL: posterURL, \r\n          })});\r\n\r\n        console.log('Movie added successfully');\r\n        \r\n        this.newMovie = { title: '', genre: '', date: '', score: '', details: '', poster: null };\r\n        this.imagePreview = null;\r\n        this.isFormVisible = false;\r\n        \r\n        alert(\"Movie added sucessfully\");\r\n      } catch (error) {\r\n        console.error(\"Error adding movie: \", error);\r\n      }\r\n    \r\n    },\r\n\r\n    async displayMovies(){\r\n      try{\r\n\r\n        const user = auth.currentUser;\r\n        if(!user){\r\n          console.log('No user logged in');\r\n          return;\r\n        }\r\n\r\n        const response = await fetch(`http://localhost:3000/movies?userEmail=${encodeURIComponent(user.email)}`);\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Network response was not ok');\r\n        }\r\n       const movies = await response.json();\r\n       console.log(\"Movies received:\", movies);\r\n       \r\n       this.movies = movies.map(movie => ({\r\n        id: movie.id,\r\n        ...movie,\r\n      posterURL: movie.posterURL \r\n    }));\r\n\r\n    console.log(\"Processed movies:\", this.movies);\r\n    this.filteredMovies = this.movies;\r\n      } catch(error){\r\n        console.error(\"Error displaying movies: \", error);\r\n      }\r\n    },\r\n\r\n    showMovieDetails(movie){\r\n      this.selectedMovie = movie;\r\n    },\r\n\r\n    closeModal(){\r\n      this.selectedMovie = null;\r\n    },\r\n\r\n    formatDate(date){\r\n      if (!date) return 'No date available';\r\n      try {\r\n        const options = { day: '2-digit', month: '2-digit', year: 'numeric' };\r\n        //'en-GB' este pentru zi/luna/an\r\n        return new Date(date).toLocaleDateString('en-GB', options); \r\n    } catch (error) {\r\n      return 'Invalid Date';\r\n    }\r\n    },\r\n\r\n    editMovie(){\r\n      this.isEditing = true;\r\n      this.editedMovie = { ...this.selectedMovie };\r\n    },\r\n\r\n    cancelMovie(){\r\n      this.isEditing= false;\r\n      this.selectedMovie = {...this.editedMovie};\r\n    },\r\n\r\n    async saveMovieEdits() {\r\n     try {\r\n      if (!this.selectedMovie.id) return;\r\n\r\n      let posterURL = this.selectedMovie.posterURL;\r\n\r\n      if (this.editedMovie.newPoster) {\r\n        \r\n        const oldPosterPath = decodeURIComponent(posterURL).split('/o/')[1].split('?')[0];\r\n        const oldPosterRef = ref(storage, oldPosterPath);\r\n        try {\r\n          await deleteObject(oldPosterRef);\r\n          console.log('Old poster deleted');\r\n        } catch (error) {\r\n          console.error('Error deleting old poster:', error);\r\n        }\r\n  \r\n        const posterRef = ref(storage, `posters/${this.editedMovie.newPoster.name}`);\r\n        await uploadBytes(posterRef, this.editedMovie.newPoster);\r\n        posterURL = await getDownloadURL(posterRef);\r\n\r\n        const movieIndex = this.movies.findIndex(m => m.id === this.selectedMovie.id);\r\n        if (movieIndex !== -1) {\r\n          this.movies[movieIndex].posterURL = posterURL;\r\n        }\r\n        \r\n        const filteredIndex = this.filteredMovies.findIndex(m => m.id === this.selectedMovie.id);\r\n        if (filteredIndex !== -1) {\r\n          this.filteredMovies[filteredIndex].posterURL = posterURL;\r\n        }\r\n      }\r\n  \r\n\r\n      const movieRef = doc(db, \"movies\", this.selectedMovie.id);\r\n      await updateDoc(movieRef, {\r\n        \"movie.title\": this.editedMovie.title,\r\n        \"movie.genre\": this.editedMovie.genre,\r\n        \"movie.date\": this.editedMovie.date,\r\n        \"movie.score\": this.editedMovie.score,\r\n        \"movie.details\": this.editedMovie.details,\r\n        \"posterURL\": posterURL,\r\n        \"metadata.updatedAt\": serverTimestamp(),\r\n      });\r\n\r\n      Object.assign(this.selectedMovie, {\r\n      ...this.editedMovie,\r\n      posterURL\r\n    });\r\n\r\n      this.isEditing = false;\r\n         } catch (error) {\r\n      console.error(\"Error updating movie:\", error);\r\n        }\r\n      },\r\n\r\n    async deleteMovie() {\r\n      if (!this.selectedMovie || !this.selectedMovie.id) {\r\n          console.error(\"No movie selected or invalid movie ID\");\r\n          return;\r\n      }\r\n\r\n      try {\r\n\r\n        if (!confirm(\"Are you sure you want to delete this movie?\")) {\r\n        return;\r\n      }\r\n\r\n      console.log(\"Attempting to delete movie with ID:\", this.selectedMovie.id);\r\n\r\n      const response = await fetch(`http://localhost:3000/movies/${this.selectedMovie.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        }\r\n      });\r\n\r\n      console.log(\"Delete response status:\", response.status);\r\n\r\n      const responseData = await response.json();\r\n\r\n      if (!response.ok) {\r\n        alert(responseData.error || \"Failed to delete movie\");\r\n        return;\r\n      }\r\n\r\n      const index = this.movies.findIndex(movie => movie.id === this.selectedMovie.id);\r\n      if (index > -1) {\r\n        this.movies.splice(index, 1);\r\n      }\r\n\r\n      this.closeModal();\r\n      console.log('Movie deleted successfully');\r\n      } catch (error) {\r\n        console.error(\"Error deleting movie:\", error);\r\n        alert(\"Failed to delete movie. Please try again.\");\r\n      }\r\n    },\r\n    \r\n    //search\r\n      searching(){\r\n        if(!this.searched){\r\n          this.filteredMovies =[ ...this.movies];\r\n        }else{\r\n          const lowerCase = this.searched.toLowerCase();\r\n          this.filteredMovies = this.movies.filter(movie=>\r\n            movie.title.toLowerCase().includes(lowerCase)\r\n          );\r\n        }\r\n\r\n        if(this.sortType === 'desc'){\r\n          this.sortMovies();\r\n        }\r\n      },\r\n\r\n      //filter\r\n\r\n      toggleFilter() {\r\n        this.isFilterVisible = !this.isFilterVisible;\r\n      },\r\n\r\n      applyFilter() {\r\n        if (!this.selectedFilter) {\r\n            this.filteredMovies = this.movies;\r\n        return;\r\n      }\r\n\r\n        if (this.selectedFilter) {\r\n            this.filteredMovies = this.movies.filter(movie => movie.genre === this.selectedFilter);\r\n        }\r\n       \r\n        \r\n      },\r\n\r\n      toggleMenu(event) {\r\n        event.stopPropagation(); \r\n        this.isMenuVisible = !this.isMenuVisible;\r\n    },\r\n    closeMenu() {\r\n      this.isMenuVisible = false;\r\n    },\r\n\r\n    sortMovies() {\r\n      this.sortType = this.sortType === 'asc' ? 'desc' : 'asc';\r\n      \r\n      this.filteredMovies.sort((a, b) => {\r\n        const titleA = a.title.toLowerCase();\r\n        const titleB = b.title.toLowerCase();\r\n        \r\n        if (this.sortType === 'asc') {\r\n          return titleA < titleB ? -1 : titleA > titleB ? 1 : 0;\r\n        } else {\r\n          return titleB < titleA ? -1 : titleB > titleA ? 1 : 0;\r\n        }\r\n      });\r\n    }\r\n\r\n  },\r\n  \r\n  watch: {\r\n       searched() {\r\n        this.searching();\r\n      },\r\n       selectedFilter() {\r\n        this.applyFilter();\r\n      },\r\n      \r\n  },\r\n  mounted() {\r\n    document.addEventListener('click', this.closeMenu);\r\n\r\n  },\r\n\r\n  beforeUnount() {\r\n    document.removeEventListener('click', this.closeMenu);\r\n  },\r\n\r\n\r\n \r\n\r\n};"],"mappings":";;;;;;;AAAA,OAAOA,IAAI,MAAM,4BAA4B;AAC7C,SAASC,OAAO,QAAQ,eAAe;AACvC,SAASC,kBAAkB,QAAQ,eAAe;AAClD,SAAQC,IAAI,QAAO,mBAAmB;AACtC,SAASC,YAAY,EAAEC,UAAU,EAAEC,MAAM,EAAEC,eAAe,EAAEC,SAAS,EAAEC,GAAG,QAAO,oBAAoB;AACrG,SAAQC,GAAG,EAAEC,WAAW,EAAEC,cAAc,EAAEC,YAAY,QAAO,kBAAkB;AAC/E,SAASC,OAAO,QAAQ,mBAAmB;AAC3C,OAAOC,OAAO,MAAM,mBAAmB;AACvC,OAAOC,SAAS,MAAM,qBAAqB;AAC3C,OAAOC,QAAQ,MAAM,yBAAyB;AAC9C;AACA,OAAOC,UAAU,MAAM,aAAa;AACpC;;AAEA,MAAMC,EAAE,GAAGf,YAAY,CAAC,CAAC;AAEzB,eAAe;EACbgB,IAAI,EAAE,UAAU;EAChBC,IAAIA,CAAA,EAAE;IACJ,OAAM;MACJrB,IAAI;MACJgB,SAAS;MACTD,OAAO;MACPE,QAAQ;MACRC,UAAU;MACVI,MAAM,EAAE,EAAE;MACVC,aAAa,EAAE,KAAK;MACpBC,SAAS,EAAE,KAAK;MAChBC,aAAa,EAAE,KAAK;MACpBC,QAAQ,EAAE,KAAK;MACfC,WAAW,EAAE,CAAC,CAAC;MACfC,QAAQ,EAAC;QACPC,KAAK,EAAE,EAAE;QACTC,KAAK,EAAE,EAAE;QACTC,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE,IAAI;QACXC,OAAO,EAAE,EAAE;QACXC,MAAM,EAAE;MACV,CAAC;MACDC,WAAW,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAAE;MACrDC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,aAAa,EAAE,IAAI;MACnBC,QAAQ,EAAE,EAAE;MACZC,cAAc,EAAC,EAAE;MACjBC,cAAc,EAAE,EAAE;MAElBC,eAAe,EAAE,KAAK;MACtBC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EAEDC,OAAOA,CAAA,EAAE;IAEP7C,kBAAkB,CAACC,IAAI,EAAG6C,IAAI,IAAK;MACjC,IAAIA,IAAI,EAAE;QACR,IAAI,CAACR,QAAQ,GAAGQ,IAAI,CAACC,KAAK;QAC1B,IAAI,CAACC,aAAa,CAACF,IAAI,CAACG,GAAG,CAAC;QAC5B,IAAI,CAACC,aAAa,CAAC,CAAC;QACpBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEN,IAAI,CAACC,KAAK,CAAC;MAC5C,CAAC,MAAM;QACLI,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;QAChC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MACxB;IACF,CAAC,CAAC;EAEJ,CAAC;EAEDC,OAAO,EAAE;IACT,MAAMC,WAAWA,CAAA,EAAG;MAClBL,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;MACtC,IAAI;QACF,MAAMrD,OAAO,CAACE,IAAI,CAAC;QACnBkD,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;QAC9B,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MACxB,CAAC,CAAC,OAAOG,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC7C;IACF,CAAC;IAED;IACAC,UAAUA,CAAA,EAAE;MACV,IAAI,CAAChC,QAAQ,GAAG;QAAEC,KAAK,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,IAAI,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,MAAM,EAAE;MAAK,CAAC;MACxF,IAAI,CAACK,YAAY,GAAG,IAAI;MACxB,IAAI,CAAChB,aAAa,GAAG,CAAC,IAAI,CAACA,aAAa;IAE1C,CAAC;IAEDsC,iBAAiBA,CAACC,KAAK,EAAEtC,SAAS,GAAC,KAAK,EAAE;MACtC,MAAMuC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIF,IAAI,EAAE;QACR,MAAMG,SAAS,GAAG,CAAC,WAAW,EAAE,YAAY,CAAC;QAC7C,IAAG,CAACA,SAAS,CAACC,QAAQ,CAACJ,IAAI,CAACK,IAAI,CAAC,EAAC;UAChCC,KAAK,CAAC,kCAAkC,CAAC;QAC3C;QAEA,IAAG7C,SAAS,EAAC;UACX,IAAI,CAACG,WAAW,CAAC2C,SAAS,GAAGP,IAAI;UACjC,IAAI,CAACpC,WAAW,CAAC4C,aAAa,GAAIC,GAAG,CAACC,eAAe,CAACV,IAAI,CAAC;QAC7D,CAAC,MAAK;UACJ,IAAI,CAACxB,YAAY,GAAGiC,GAAG,CAACC,eAAe,CAACV,IAAI,CAAC;UAC7C,IAAI,CAACnC,QAAQ,CAACM,MAAM,GAAG6B,IAAI;UAC3BV,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC1B,QAAQ,CAACM,MAAM,CAAC;QACvD;MAEF,CAAC,MAAK;QACJmB,OAAO,CAACM,KAAK,CAAC,mCAAmC,CAAC;MACpD;IACF,CAAC;IAEDT,aAAaA,CAAA,EAAG;MACd,MAAMF,IAAI,GAAG7C,IAAI,CAACuE,WAAW;MAE9B,IAAI1B,IAAI,EAAE;QACN2B,KAAK,CAAC,8BAA8B3B,IAAI,CAACG,GAAG,EAAE,CAAC,CAACyB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CAC7EF,IAAI,CAACvD,IAAI,IAAI;UACXgC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEjC,IAAI,CAAC;UACvC,IAAI,CAACmB,QAAQ,GAAGnB,IAAI,CAAC0D,SAAS;QAChC,CAAC,CAAC,CAACC,KAAK,CAACrB,KAAK,IAAI;UACfN,OAAO,CAACM,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAC5C,CAAC,CAAC;MAChB;IACE,CAAC;IAEH,MAAMsB,QAAQA,CAAA,EAAE;MACd,IAAI;QACA,IAAI,CAAC,IAAI,CAACrD,QAAQ,CAACM,MAAM,IAAI,EAAE,IAAI,CAACN,QAAQ,CAACM,MAAM,YAAYgD,IAAI,CAAC,EAAE;UACpEb,KAAK,CAAC,qCAAqC,CAAC;UAC5C;QACF;QAEA,IAAG,IAAI,CAACzC,QAAQ,CAACI,KAAK,GAAE,CAAC,IAAI,IAAI,CAACJ,QAAQ,CAACI,KAAK,GAAC,EAAE,EAAC;UAClDqC,KAAK,CAAC,qCAAqC,CAAC;UAC5C;QACF;QAEA,IAAI,IAAI,CAACzC,QAAQ,CAACG,IAAI,GAAG,IAAI,CAACI,WAAW,EAAE;UACzCkC,KAAK,CAAC,8CAA8C,CAAC;UACrD;QACF;;QAEC;QACD,MAAMc,SAAS,GAAGzE,GAAG,CAACI,OAAO,EAAE,WAAW,IAAI,CAACc,QAAQ,CAACM,MAAM,CAACd,IAAI,EAAE,CAAC;QACtE,MAAMT,WAAW,CAACwE,SAAS,EAAE,IAAI,CAACvD,QAAQ,CAACM,MAAM,CAAC;QAClD,MAAMkD,SAAS,GAAG,MAAMxE,cAAc,CAACuE,SAAS,CAAC;QAEjD,MAAMnC,IAAI,GAAG7C,IAAI,CAACuE,WAAW;QAE7B,MAAMpE,MAAM,CAACD,UAAU,CAACc,EAAE,EAAE,QAAQ,CAAC,EAAE;UACrCkE,KAAK,EAAC;YACJxD,KAAK,EAAE,IAAI,CAACD,QAAQ,CAACC,KAAK;YAC1BC,KAAK,EAAE,IAAI,CAACF,QAAQ,CAACE,KAAK;YAC1BC,IAAI,EAAE,IAAI,CAACH,QAAQ,CAACG,IAAI;YACxBC,KAAK,EAAEsD,UAAU,CAAC,IAAI,CAAC1D,QAAQ,CAACI,KAAK,CAAC;YACtCC,OAAO,EAAE,IAAI,CAACL,QAAQ,CAACK;UACzB,CAAC;UAEDmD,SAAS;UACTpC,IAAI,EAAE;YACJG,GAAG,EAAEH,IAAI,CAACG,GAAG;YACbF,KAAK,EAAED,IAAI,CAACC;UAEd,CAAC;UACDsC,QAAQ,EAAE;YACRC,SAAS,EAAEjF,eAAe,CAAC,CAAC;YAC5BkF,SAAS,EAAElF,eAAe,CAAC;UAC7B;QACF,CAAC,CAAC,CAACqE,IAAI,CAAEc,MAAM,IAAK;UACjB,IAAI,CAACpE,MAAM,CAACkC,IAAI,CAAC;YAChBmC,EAAE,EAAED,MAAM,CAACC,EAAE;YACb9D,KAAK,EAAE,IAAI,CAACD,QAAQ,CAACC,KAAK;YAC1BC,KAAK,EAAE,IAAI,CAACF,QAAQ,CAACE,KAAK;YAC1BC,IAAI,EAAE,IAAI,CAACH,QAAQ,CAACG,IAAI;YACxBC,KAAK,EAAEsD,UAAU,CAAC,IAAI,CAAC1D,QAAQ,CAACI,KAAK,CAAC;YACtCC,OAAO,EAAE,IAAI,CAACL,QAAQ,CAACK,OAAO;YAC9BmD,SAAS,EAAEA;UACb,CAAC,CAAC;QAAA,CAAC,CAAC;QAEN/B,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;QAEvC,IAAI,CAAC1B,QAAQ,GAAG;UAAEC,KAAK,EAAE,EAAE;UAAEC,KAAK,EAAE,EAAE;UAAEC,IAAI,EAAE,EAAE;UAAEC,KAAK,EAAE,EAAE;UAAEC,OAAO,EAAE,EAAE;UAAEC,MAAM,EAAE;QAAK,CAAC;QACxF,IAAI,CAACK,YAAY,GAAG,IAAI;QACxB,IAAI,CAAChB,aAAa,GAAG,KAAK;QAE1B8C,KAAK,CAAC,yBAAyB,CAAC;MAClC,CAAC,CAAC,OAAOV,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C;IAEF,CAAC;IAED,MAAMP,aAAaA,CAAA,EAAE;MACnB,IAAG;QAED,MAAMJ,IAAI,GAAG7C,IAAI,CAACuE,WAAW;QAC7B,IAAG,CAAC1B,IAAI,EAAC;UACPK,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;UAChC;QACF;QAEA,MAAMuB,QAAQ,GAAG,MAAMF,KAAK,CAAC,0CAA0CiB,kBAAkB,CAAC5C,IAAI,CAACC,KAAK,CAAC,EAAE,CAAC;QAExG,IAAI,CAAC4B,QAAQ,CAACgB,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;QAChD;QACD,MAAMxE,MAAM,GAAG,MAAMuD,QAAQ,CAACC,IAAI,CAAC,CAAC;QACpCzB,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEhC,MAAM,CAAC;QAEvC,IAAI,CAACA,MAAM,GAAGA,MAAM,CAACyE,GAAG,CAACV,KAAK,KAAK;UAClCM,EAAE,EAAEN,KAAK,CAACM,EAAE;UACZ,GAAGN,KAAK;UACVD,SAAS,EAAEC,KAAK,CAACD;QACnB,CAAC,CAAC,CAAC;QAEH/B,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAChC,MAAM,CAAC;QAC7C,IAAI,CAACqB,cAAc,GAAG,IAAI,CAACrB,MAAM;MAC/B,CAAC,CAAC,OAAMqC,KAAK,EAAC;QACZN,OAAO,CAACM,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;IACF,CAAC;IAEDqC,gBAAgBA,CAACX,KAAK,EAAC;MACrB,IAAI,CAAC5C,aAAa,GAAG4C,KAAK;IAC5B,CAAC;IAEDY,UAAUA,CAAA,EAAE;MACV,IAAI,CAACxD,aAAa,GAAG,IAAI;IAC3B,CAAC;IAEDyD,UAAUA,CAACnE,IAAI,EAAC;MACd,IAAI,CAACA,IAAI,EAAE,OAAO,mBAAmB;MACrC,IAAI;QACF,MAAMoE,OAAO,GAAG;UAAEC,GAAG,EAAE,SAAS;UAAEC,KAAK,EAAE,SAAS;UAAEC,IAAI,EAAE;QAAU,CAAC;QACrE;QACA,OAAO,IAAIlE,IAAI,CAACL,IAAI,CAAC,CAACwE,kBAAkB,CAAC,OAAO,EAAEJ,OAAO,CAAC;MAC9D,CAAC,CAAC,OAAOxC,KAAK,EAAE;QACd,OAAO,cAAc;MACvB;IACA,CAAC;IAED6C,SAASA,CAAA,EAAE;MACT,IAAI,CAAChF,SAAS,GAAG,IAAI;MACrB,IAAI,CAACG,WAAW,GAAG;QAAE,GAAG,IAAI,CAACc;MAAc,CAAC;IAC9C,CAAC;IAEDgE,WAAWA,CAAA,EAAE;MACX,IAAI,CAACjF,SAAS,GAAE,KAAK;MACrB,IAAI,CAACiB,aAAa,GAAG;QAAC,GAAG,IAAI,CAACd;MAAW,CAAC;IAC5C,CAAC;IAED,MAAM+E,cAAcA,CAAA,EAAG;MACtB,IAAI;QACH,IAAI,CAAC,IAAI,CAACjE,aAAa,CAACkD,EAAE,EAAE;QAE5B,IAAIP,SAAS,GAAG,IAAI,CAAC3C,aAAa,CAAC2C,SAAS;QAE5C,IAAI,IAAI,CAACzD,WAAW,CAAC2C,SAAS,EAAE;UAE9B,MAAMqC,aAAa,GAAGC,kBAAkB,CAACxB,SAAS,CAAC,CAAC9C,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;UACjF,MAAMuE,YAAY,GAAGnG,GAAG,CAACI,OAAO,EAAE6F,aAAa,CAAC;UAChD,IAAI;YACF,MAAM9F,YAAY,CAACgG,YAAY,CAAC;YAChCxD,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;UACnC,CAAC,CAAC,OAAOK,KAAK,EAAE;YACdN,OAAO,CAACM,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;UACpD;UAEA,MAAMwB,SAAS,GAAGzE,GAAG,CAACI,OAAO,EAAE,WAAW,IAAI,CAACa,WAAW,CAAC2C,SAAS,CAAClD,IAAI,EAAE,CAAC;UAC5E,MAAMT,WAAW,CAACwE,SAAS,EAAE,IAAI,CAACxD,WAAW,CAAC2C,SAAS,CAAC;UACxDc,SAAS,GAAG,MAAMxE,cAAc,CAACuE,SAAS,CAAC;UAE3C,MAAM2B,UAAU,GAAG,IAAI,CAACxF,MAAM,CAACyF,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACrB,EAAE,KAAK,IAAI,CAAClD,aAAa,CAACkD,EAAE,CAAC;UAC7E,IAAImB,UAAU,KAAK,CAAC,CAAC,EAAE;YACrB,IAAI,CAACxF,MAAM,CAACwF,UAAU,CAAC,CAAC1B,SAAS,GAAGA,SAAS;UAC/C;UAEA,MAAM6B,aAAa,GAAG,IAAI,CAACtE,cAAc,CAACoE,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACrB,EAAE,KAAK,IAAI,CAAClD,aAAa,CAACkD,EAAE,CAAC;UACxF,IAAIsB,aAAa,KAAK,CAAC,CAAC,EAAE;YACxB,IAAI,CAACtE,cAAc,CAACsE,aAAa,CAAC,CAAC7B,SAAS,GAAGA,SAAS;UAC1D;QACF;QAGA,MAAM8B,QAAQ,GAAGzG,GAAG,CAACU,EAAE,EAAE,QAAQ,EAAE,IAAI,CAACsB,aAAa,CAACkD,EAAE,CAAC;QACzD,MAAMnF,SAAS,CAAC0G,QAAQ,EAAE;UACxB,aAAa,EAAE,IAAI,CAACvF,WAAW,CAACE,KAAK;UACrC,aAAa,EAAE,IAAI,CAACF,WAAW,CAACG,KAAK;UACrC,YAAY,EAAE,IAAI,CAACH,WAAW,CAACI,IAAI;UACnC,aAAa,EAAE,IAAI,CAACJ,WAAW,CAACK,KAAK;UACrC,eAAe,EAAE,IAAI,CAACL,WAAW,CAACM,OAAO;UACzC,WAAW,EAAEmD,SAAS;UACtB,oBAAoB,EAAE7E,eAAe,CAAC;QACxC,CAAC,CAAC;QAEF4G,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC3E,aAAa,EAAE;UAClC,GAAG,IAAI,CAACd,WAAW;UACnByD;QACF,CAAC,CAAC;QAEA,IAAI,CAAC5D,SAAS,GAAG,KAAK;MACnB,CAAC,CAAC,OAAOmC,KAAK,EAAE;QACnBN,OAAO,CAACM,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC3C;IACF,CAAC;IAEH,MAAM0D,WAAWA,CAAA,EAAG;MAClB,IAAI,CAAC,IAAI,CAAC5E,aAAa,IAAI,CAAC,IAAI,CAACA,aAAa,CAACkD,EAAE,EAAE;QAC/CtC,OAAO,CAACM,KAAK,CAAC,uCAAuC,CAAC;QACtD;MACJ;MAEA,IAAI;QAEF,IAAI,CAAC2D,OAAO,CAAC,6CAA6C,CAAC,EAAE;UAC7D;QACF;QAEAjE,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAE,IAAI,CAACb,aAAa,CAACkD,EAAE,CAAC;QAEzE,MAAMd,QAAQ,GAAG,MAAMF,KAAK,CAAC,gCAAgC,IAAI,CAAClC,aAAa,CAACkD,EAAE,EAAE,EAAE;UACpF4B,MAAM,EAAE,QAAQ;UAChBC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QAEFnE,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEuB,QAAQ,CAAC4C,MAAM,CAAC;QAEvD,MAAMC,YAAY,GAAG,MAAM7C,QAAQ,CAACC,IAAI,CAAC,CAAC;QAE1C,IAAI,CAACD,QAAQ,CAACgB,EAAE,EAAE;UAChBxB,KAAK,CAACqD,YAAY,CAAC/D,KAAK,IAAI,wBAAwB,CAAC;UACrD;QACF;QAEA,MAAMgE,KAAK,GAAG,IAAI,CAACrG,MAAM,CAACyF,SAAS,CAAC1B,KAAK,IAAIA,KAAK,CAACM,EAAE,KAAK,IAAI,CAAClD,aAAa,CAACkD,EAAE,CAAC;QAChF,IAAIgC,KAAK,GAAG,CAAC,CAAC,EAAE;UACd,IAAI,CAACrG,MAAM,CAACsG,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;QAC9B;QAEA,IAAI,CAAC1B,UAAU,CAAC,CAAC;QACjB5C,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;MACzC,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CU,KAAK,CAAC,2CAA2C,CAAC;MACpD;IACF,CAAC;IAED;IACEwD,SAASA,CAAA,EAAE;MACT,IAAG,CAAC,IAAI,CAACnF,QAAQ,EAAC;QAChB,IAAI,CAACC,cAAc,GAAE,CAAE,GAAG,IAAI,CAACrB,MAAM,CAAC;MACxC,CAAC,MAAI;QACH,MAAMwG,SAAS,GAAG,IAAI,CAACpF,QAAQ,CAACqF,WAAW,CAAC,CAAC;QAC7C,IAAI,CAACpF,cAAc,GAAG,IAAI,CAACrB,MAAM,CAAC0G,MAAM,CAAC3C,KAAK,IAC5CA,KAAK,CAACxD,KAAK,CAACkG,WAAW,CAAC,CAAC,CAAC5D,QAAQ,CAAC2D,SAAS,CAC9C,CAAC;MACH;MAEA,IAAG,IAAI,CAAChF,QAAQ,KAAK,MAAM,EAAC;QAC1B,IAAI,CAACmF,UAAU,CAAC,CAAC;MACnB;IACF,CAAC;IAED;;IAEAC,YAAYA,CAAA,EAAG;MACb,IAAI,CAACrF,eAAe,GAAG,CAAC,IAAI,CAACA,eAAe;IAC9C,CAAC;IAEDsF,WAAWA,CAAA,EAAG;MACZ,IAAI,CAAC,IAAI,CAACvF,cAAc,EAAE;QACtB,IAAI,CAACD,cAAc,GAAG,IAAI,CAACrB,MAAM;QACrC;MACF;MAEE,IAAI,IAAI,CAACsB,cAAc,EAAE;QACrB,IAAI,CAACD,cAAc,GAAG,IAAI,CAACrB,MAAM,CAAC0G,MAAM,CAAC3C,KAAK,IAAIA,KAAK,CAACvD,KAAK,KAAK,IAAI,CAACc,cAAc,CAAC;MAC1F;IAGF,CAAC;IAEDwF,UAAUA,CAACtE,KAAK,EAAE;MAChBA,KAAK,CAACuE,eAAe,CAAC,CAAC;MACvB,IAAI,CAAC5G,aAAa,GAAG,CAAC,IAAI,CAACA,aAAa;IAC5C,CAAC;IACD6G,SAASA,CAAA,EAAG;MACV,IAAI,CAAC7G,aAAa,GAAG,KAAK;IAC5B,CAAC;IAEDwG,UAAUA,CAAA,EAAG;MACX,IAAI,CAACnF,QAAQ,GAAG,IAAI,CAACA,QAAQ,KAAK,KAAK,GAAG,MAAM,GAAG,KAAK;MAExD,IAAI,CAACH,cAAc,CAAC4F,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QACjC,MAAMC,MAAM,GAAGF,CAAC,CAAC3G,KAAK,CAACkG,WAAW,CAAC,CAAC;QACpC,MAAMY,MAAM,GAAGF,CAAC,CAAC5G,KAAK,CAACkG,WAAW,CAAC,CAAC;QAEpC,IAAI,IAAI,CAACjF,QAAQ,KAAK,KAAK,EAAE;UAC3B,OAAO4F,MAAM,GAAGC,MAAM,GAAG,CAAC,CAAC,GAAGD,MAAM,GAAGC,MAAM,GAAG,CAAC,GAAG,CAAC;QACvD,CAAC,MAAM;UACL,OAAOA,MAAM,GAAGD,MAAM,GAAG,CAAC,CAAC,GAAGC,MAAM,GAAGD,MAAM,GAAG,CAAC,GAAG,CAAC;QACvD;MACF,CAAC,CAAC;IACJ;EAEF,CAAC;EAEDE,KAAK,EAAE;IACFlG,QAAQA,CAAA,EAAG;MACV,IAAI,CAACmF,SAAS,CAAC,CAAC;IAClB,CAAC;IACAjF,cAAcA,CAAA,EAAG;MAChB,IAAI,CAACuF,WAAW,CAAC,CAAC;IACpB;EAEJ,CAAC;EACDU,OAAOA,CAAA,EAAG;IACRC,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACT,SAAS,CAAC;EAEpD,CAAC;EAEDU,YAAYA,CAAA,EAAG;IACbF,QAAQ,CAACG,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAACX,SAAS,CAAC;EACvD;AAKF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}