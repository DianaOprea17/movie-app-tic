{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { signOut } from \"firebase/auth\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { auth } from '../firebaseConfig';\nimport { getFirestore, collection, addDoc, serverTimestamp, updateDoc, doc } from \"firebase/firestore\";\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { storage } from \"../firebaseConfig\";\nconst db = getFirestore();\nexport default {\n  name: 'HomePage',\n  data() {\n    return {\n      movies: [],\n      isFormVisible: false,\n      isEditing: false,\n      editedMovie: {},\n      newMovie: {\n        title: '',\n        genre: '',\n        date: '',\n        score: '',\n        details: '',\n        poster: null\n      },\n      imagePreview: null,\n      username: null,\n      selectedMovie: null,\n      searched: '',\n      filteredMovies: [],\n      selectedGenre: '',\n      selectedFilter: '',\n      isFilterVisible: false\n    };\n  },\n  created() {\n    this.displayMovies();\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        this.username = user.email;\n        this.fetchUserName(user.uid);\n        console.log(\"User logged in:\", user.email);\n      } else {\n        console.log(\"No user logged in\");\n        this.$router.push('/');\n      }\n    });\n  },\n  methods: {\n    async signoutuser() {\n      console.log(\"Sign out button clicked\");\n      try {\n        await signOut(auth);\n        console.log(\"User signed out\");\n        this.$router.push('/');\n      } catch (error) {\n        console.error(\"Error signing out: \", error);\n      }\n    },\n    toggleForm() {\n      this.isFormVisible = !this.isFormVisible;\n    },\n    handleImageUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.imagePreview = URL.createObjectURL(file);\n        this.newMovie.poster = file;\n        console.log('Poster uploaded:', this.newMovie.poster);\n      } else {\n        console.error('No file selected or invalid file.');\n      }\n    },\n    fetchUserName() {\n      const user = auth.currentUser;\n      if (user) {\n        fetch(`http://localhost:3000/user/${user.uid}`).then(response => response.json()).then(data => {\n          console.log('User data fetched:', data);\n          this.username = data.firstName;\n        }).catch(error => {\n          console.error('Error fetching user:', error);\n        });\n      }\n    },\n    async addMovie() {\n      try {\n        if (!this.newMovie.poster || !(this.newMovie.poster instanceof File)) {\n          alert(\"Please upload a valid movie poster.\");\n          return;\n        }\n\n        //upload poster in storage\n        const posterRef = ref(storage, `posters/${this.newMovie.poster.name}`);\n        await uploadBytes(posterRef, this.newMovie.poster);\n        const posterURL = await getDownloadURL(posterRef);\n        const user = auth.currentUser;\n        await addDoc(collection(db, \"movies\"), {\n          movie: {\n            title: this.newMovie.title,\n            genre: this.newMovie.genre,\n            date: this.newMovie.date,\n            score: parseFloat(this.newMovie.score),\n            details: this.newMovie.details\n          },\n          posterURL,\n          user: {\n            uid: user.uid,\n            email: user.email\n          },\n          metadata: {\n            createdAt: serverTimestamp(),\n            updatedAt: serverTimestamp()\n          }\n        });\n        console.log('Movie added successfully');\n        this.newMovie = {\n          title: '',\n          genre: '',\n          date: '',\n          score: '',\n          details: '',\n          poster: null\n        };\n        this.imagePreview = null;\n        this.isFormVisible = false;\n        alert(\"Movie added sucessfully\");\n      } catch (error) {\n        console.error(\"Error adding movie: \", error);\n      }\n    },\n    //modala\n    async displayMovies() {\n      try {\n        const response = await fetch('http://localhost:3000/movies');\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        const movies = await response.json();\n        console.log(\"Filmele primite:\", movies);\n        this.movies = movies.map(movie => ({\n          id: movie.id,\n          ...movie,\n          posterURL: movie.posterURL\n        }));\n        this.filteredMovies = this.movies;\n      } catch (error) {\n        console.error(\"Error displaying movies: \", error);\n      }\n    },\n    showMovieDetails(movie) {\n      this.selectedMovie = movie;\n    },\n    closeModal() {\n      this.selectedMovie = null;\n    },\n    formatDate(date) {\n      if (!date) return 'No date available';\n      try {\n        const options = {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        };\n        //'en-GB' este pentru zi/luna/an\n        return new Date(date).toLocaleDateString('en-GB', options);\n      } catch (error) {\n        return 'Invalid Date';\n      }\n    },\n    editMovie() {\n      this.isEditing = true;\n      this.editedMovie = {\n        ...this.selectedMovie\n      };\n    },\n    async saveMovieEdits() {\n      try {\n        if (!this.selectedMovie.id) return;\n        const movieRef = doc(db, \"movies\", this.selectedMovie.id);\n        await updateDoc(movieRef, {\n          \"movie.title\": this.editedMovie.title,\n          \"movie.genre\": this.editedMovie.genre,\n          \"movie.date\": this.editedMovie.date,\n          \"movie.score\": this.editedMovie.score,\n          \"movie.details\": this.editedMovie.details,\n          \"metadata.updatedAt\": serverTimestamp()\n        });\n        Object.assign(this.selectedMovie, this.editedMovie);\n        this.isEditing = false;\n      } catch (error) {\n        console.error(\"Error updating movie:\", error);\n      }\n    },\n    async deleteMovie() {\n      if (!this.selectedMovie || !this.selectedMovie.id) {\n        console.error(\"No movie selected or invalid movie ID\");\n        return;\n      }\n      try {\n        if (!confirm(\"Are you sure you want to delete this movie?\")) {\n          return;\n        }\n        console.log(\"Attempting to delete movie with ID:\", this.selectedMovie.id);\n        const response = await fetch(`http://localhost:3000/movies/${this.selectedMovie.id}`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        console.log(\"Delete response status:\", response.status);\n        const responseData = await response.json();\n        if (!response.ok) {\n          alert(responseData.error || \"Failed to delete movie\");\n          return;\n        }\n        const index = this.movies.findIndex(movie => movie.id === this.selectedMovie.id);\n        if (index > -1) {\n          this.movies.splice(index, 1);\n        }\n        this.closeModal();\n        console.log('Movie deleted successfully');\n      } catch (error) {\n        console.error(\"Error deleting movie:\", error);\n        alert(\"Failed to delete movie. Please try again.\");\n      }\n    },\n    //search\n    searching() {\n      if (!this.searched) {\n        this.filteredMovies = this.movies;\n      } else {\n        const lowerCase = this.searched.toLowerCase();\n        this.filteredMovies = this.movies.filter(movie => movie.title.toLowerCase().includes(lowerCase));\n      }\n    },\n    //filter\n\n    toggleFilter() {\n      this.isFilterVisible = !this.isFilterVisible;\n    },\n    applyFilter() {\n      if (!this.selectedFilter) {\n        this.filteredMovies = this.movies;\n        return;\n      }\n      if (this.selectedFilter === \"genre\" && this.selectedGenre) {\n        this.filteredMovies = this.movies.filter(movie => movie.genre === this.selectedGenre);\n      } else {\n        this.filteredMovies = this.movies;\n      }\n    }\n  },\n  watch: {\n    searched() {\n      this.searching();\n    },\n    selectedFilter() {\n      this.applyFilter();\n    },\n    selectedGenre() {\n      this.applyFilter();\n    }\n  }\n\n  //filter\n};","map":{"version":3,"names":["signOut","onAuthStateChanged","auth","getFirestore","collection","addDoc","serverTimestamp","updateDoc","doc","ref","uploadBytes","getDownloadURL","storage","db","name","data","movies","isFormVisible","isEditing","editedMovie","newMovie","title","genre","date","score","details","poster","imagePreview","username","selectedMovie","searched","filteredMovies","selectedGenre","selectedFilter","isFilterVisible","created","displayMovies","user","email","fetchUserName","uid","console","log","$router","push","methods","signoutuser","error","toggleForm","handleImageUpload","event","file","target","files","URL","createObjectURL","currentUser","fetch","then","response","json","firstName","catch","addMovie","File","alert","posterRef","posterURL","movie","parseFloat","metadata","createdAt","updatedAt","ok","Error","map","id","showMovieDetails","closeModal","formatDate","options","day","month","year","Date","toLocaleDateString","editMovie","saveMovieEdits","movieRef","Object","assign","deleteMovie","confirm","method","headers","status","responseData","index","findIndex","splice","searching","lowerCase","toLowerCase","filter","includes","toggleFilter","applyFilter","watch"],"sources":["D:\\facultate\\mastrer\\movie-app-tic\\front\\client\\src\\components\\HomePage.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n      <nav class=\"navbar\">\r\n        <div class=\"nav-logo\">\r\n          <span class=\"logo\"> Movie Tracker</span>\r\n        </div>\r\n\r\n        <div class=\"nav-links\">\r\n          <span class=\"nav-link\">{{ username ? `${username}'s Movie List` : \"Your Movie List\" }}</span>\r\n          <button type = button v-on:click=\"signoutuser\" class=\"nav-btn\"> Sign out</button>\r\n          <button @click=\"toggleForm\" class=\"nav-btn\">Add New Movie</button>\r\n        </div>\r\n      </nav>\r\n\r\n      <div class=\"container\">\r\n\r\n    \r\n      <div v-if=\"isFormVisible\" class=\"addmovieform\">\r\n      <h2>Add a New Movie</h2>\r\n       <form @submit.prevent=\"addMovie\">\r\n        <div>\r\n          <label for=\"movieTitle\">Title:</label>\r\n          <input type=\"text\" id=\"movieTitle\" v-model=\"newMovie.title\" required />\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"movieGenre\">Genre:</label>\r\n          <select id=\"movieGenre\" v-model=\"newMovie.genre\" required>\r\n            <option value=\"\" disabled selected>Select a genre</option>\r\n            <option value=\"Action\">Action</option>\r\n            <option value=\"Animation\">Animation</option>\r\n            <option value=\"Comedy\">Comedy</option>\r\n            <option value=\"Drama\">Drama</option>\r\n            <option value=\"Horror\">Horror</option>\r\n            <option value=\"Romance\">Romance</option>\r\n            <option value=\"Sci-Fi\">Sci-Fi</option>\r\n            <option value=\"Thriller\">Thriller</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"movieDate\">Date:</label>\r\n          <input type=\"date\" id=\"movieDate\" v-model=\"newMovie.date\" required />\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"movieScore\">Score:</label>\r\n          <input type=\"number\" id=\"movieScore\" v-model=\"newMovie.score\" required />\r\n        </div>\r\n\r\n        <div>\r\n          <label for =\"details\">Other Details: </label>\r\n          <input type=\"text\" id=\"details\" v-model = \"newMovie.details\" required/>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"moviePoster\">Movie Poster:</label>\r\n          <input type=\"file\" id=\"moviePoster\" @change=\"handleImageUpload\" accept=\"image/*\" />\r\n        </div>\r\n        <div v-if=\"imagePreview\">\r\n          <h3>Image Preview:</h3>\r\n          <img :src=\"imagePreview\" alt=\"Image Preview\" style=\"max-width: 200px; margin-top: 10px;\"/>\r\n        </div>\r\n\r\n        <button type=\"submit\" class=\"btn-form\">Add Movie</button>\r\n        </form>\r\n       </div>\r\n    \r\n    </div>\r\n\r\n    \r\n        <div class=\"search-filter\">\r\n          <input v-model=\"searched\" type=\"text\" placeholder=\"Search\" class=\"search-input\">\r\n          \r\n          <div class = \"filter-wrap\">\r\n          <button @click=\"toggleFilter\" class=\"filter-btn\">Filter by</button>\r\n          <div  v-if=\"isFilterVisible\" class=\"filter-container\">\r\n   \r\n  \r\n   <div class=\"filter-options\">\r\n     <label for=\"filterType\">Choose filter:</label>\r\n     <select id=\"filterType\" v-model=\"selectedFilter\">\r\n       <option value=\"\">None</option>\r\n       <option value=\"genre\">Genre</option>\r\n     </select>\r\n\r\n     <div v-if=\"selectedFilter === 'genre'\">\r\n     <label for=\"genreFilter\">Choose Genre:</label>\r\n     <select id=\"genreFilter\" v-model=\"selectedGenre\">\r\n       <option value=\"\">All</option>\r\n       <option value=\"Action\">Action</option>\r\n       <option value=\"Animation\">Animation</option>\r\n       <option value=\"Comedy\">Comedy</option>\r\n       <option value=\"Drama\">Drama</option>\r\n       <option value=\"Horror\">Horror</option>\r\n       <option value=\"Romance\">Romance</option>\r\n       <option value=\"Sci-Fi\">Sci-Fi</option>\r\n       <option value=\"Thriller\">Thriller</option>\r\n     </select>\r\n    </div>\r\n  </div>\r\n  </div>\r\n          </div>\r\n        </div>\r\n     \r\n\r\n     \r\n\r\n    <div v-if=\"filteredMovies.length >0\">\r\n     \r\n      <div class=\"movie-list\">\r\n        <div v-for=\"movie in filteredMovies\" :key=\"movie.id\" class=\"movie-item\" @click=\"showMovieDetails(movie)\">\r\n          \r\n          <img \r\n          :src=\"movie.posterURL\" \r\n          :alt=\"movie.title\"\r\n          class=\"movie-poster\"\r\n        />\r\n        <div class=\"movie-details\">\r\n          <strong>{{ movie.title }}</strong><br/>\r\n          \r\n        </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n    \r\n\r\n    <div v-if=\"selectedMovie\" class=\"modal-overlay\" @click=\"closeModal\">\r\n      <div class=\"modal-content\" @click.stop>\r\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\r\n        <div class=\"modal-body\">\r\n          <img :src=\"selectedMovie.posterURL\" :alt=\"selectedMovie.title\" class=\"modal-poster\"/>\r\n          <div class=\"modal-info\">\r\n\r\n            <h2 v-if=\"!isEditing\">{{ selectedMovie.title }}</h2>\r\n            <input v-else type=\"text\" v-model=\"editedMovie.title\" />\r\n\r\n           <p v-if=\"!isEditing\"><strong>Genre:</strong> {{ selectedMovie.genre }}</p>\r\n            <select v-else v-model=\"editedMovie.genre\">\r\n              <option value=\"Action\">Action</option>\r\n              <option value=\"Animation\">Animation</option>\r\n              <option value=\"Comedy\">Comedy</option>\r\n              <option value=\"Drama\">Drama</option>\r\n              <option value=\"Horror\">Horror</option>\r\n              <option value=\"Romance\">Romance</option>\r\n              <option value=\"Sci-Fi\">Sci-Fi</option>\r\n              <option value=\"Thriller\">Thriller</option>\r\n            </select>\r\n\r\n             <p v-if=\"!isEditing\"><strong>Date seen:</strong> {{ formatDate(selectedMovie.date) }}</p>\r\n            <input v-else type=\"date\" v-model=\"editedMovie.date\" />\r\n\r\n            <p v-if=\"!isEditing\"><strong>Score:</strong> {{ selectedMovie.score }}/10</p>\r\n            <input v-else type=\"number\" v-model=\"editedMovie.score\" />\r\n\r\n            <p v-if=\"!isEditing\"><strong>Other Details:</strong> {{ selectedMovie.details }}</p>\r\n            <input v-else type=\"text\" v-model=\"editedMovie.details\"/>\r\n\r\n            <button class=\"edit-button\" @click=\"editMovie\">Edit</button>\r\n            <button class=\"delete-button\" @click=\"deleteMovie\">Delete</button>\r\n            <button v-if=\"isEditing\" @click=\"saveMovieEdits\">Save</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n    \r\n  </template>\r\n\r\n<script>\r\nimport { signOut } from \"firebase/auth\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport {auth} from '../firebaseConfig';\r\nimport { getFirestore, collection, addDoc, serverTimestamp, updateDoc, doc} from \"firebase/firestore\";\r\nimport{ ref, uploadBytes, getDownloadURL} from \"firebase/storage\";\r\nimport { storage } from \"../firebaseConfig\";\r\n\r\nconst db = getFirestore();\r\n\r\nexport default {\r\n  name: 'HomePage',\r\n  data(){\r\n    return{\r\n      movies: [],\r\n      isFormVisible: false,\r\n      isEditing: false,\r\n      editedMovie: {},\r\n      newMovie:{\r\n        title: '',\r\n        genre: '',\r\n        date: '',\r\n        score: '',\r\n        details: '',\r\n        poster: null,\r\n      },\r\n      imagePreview: null,\r\n      username: null,\r\n      selectedMovie: null,\r\n      searched: '',\r\n      filteredMovies:[],\r\n      selectedGenre:'',\r\n      selectedFilter: '',\r\n      isFilterVisible: false,\r\n    };\r\n  },\r\n\r\n  created(){\r\n    this.displayMovies();\r\n    onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        this.username = user.email; \r\n        this.fetchUserName(user.uid);\r\n        console.log(\"User logged in:\", user.email);\r\n      } else {\r\n        console.log(\"No user logged in\");\r\n        this.$router.push('/'); \r\n      }\r\n    });\r\n\r\n  },\r\n\r\n  methods: {\r\n  async signoutuser() {\r\n    console.log(\"Sign out button clicked\");\r\n    try {\r\n      await signOut(auth);\r\n      console.log(\"User signed out\");\r\n      this.$router.push('/');\r\n    } catch (error) {\r\n      console.error(\"Error signing out: \", error);\r\n    }\r\n  },\r\n  toggleForm(){\r\n    this.isFormVisible = !this.isFormVisible;\r\n  },\r\n  handleImageUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        \r\n        this.imagePreview = URL.createObjectURL(file);\r\n        this.newMovie.poster = file; \r\n        console.log('Poster uploaded:', this.newMovie.poster);\r\n      }else {\r\n        console.error('No file selected or invalid file.');\r\n      }\r\n    },\r\n\r\n    fetchUserName() {\r\n      const user = auth.currentUser;\r\n\r\n     if (user) {\r\n         fetch(`http://localhost:3000/user/${user.uid}`).then(response => response.json())\r\n            .then(data => {\r\n               console.log('User data fetched:', data);\r\n               this.username = data.firstName;\r\n             }).catch(error => {\r\n                console.error('Error fetching user:', error);\r\n                });\r\n  }\r\n    },\r\n\r\n  async addMovie(){\r\n    try {\r\n        if (!this.newMovie.poster || !(this.newMovie.poster instanceof File)) {\r\n          alert(\"Please upload a valid movie poster.\");\r\n          return;\r\n        }\r\n\r\n         //upload poster in storage\r\n        const posterRef = ref(storage, `posters/${this.newMovie.poster.name}`);\r\n        await uploadBytes(posterRef, this.newMovie.poster);\r\n        const posterURL = await getDownloadURL(posterRef);\r\n\r\n        const user = auth.currentUser;\r\n\r\n        await addDoc(collection(db, \"movies\"), {\r\n          movie:{\r\n            title: this.newMovie.title,\r\n            genre: this.newMovie.genre ,\r\n            date: this.newMovie.date,\r\n            score: parseFloat(this.newMovie.score),\r\n            details: this.newMovie.details\r\n          },\r\n          \r\n          posterURL,\r\n          user: {\r\n            uid: user.uid,\r\n            email: user.email,\r\n            \r\n          },\r\n          metadata: {\r\n            createdAt: serverTimestamp(),\r\n            updatedAt: serverTimestamp(),\r\n          },\r\n        });\r\n\r\n        console.log('Movie added successfully');\r\n        this.newMovie = { title: '', genre: '', date: '', score: '', details: '', poster: null };\r\n        this.imagePreview = null;\r\n        this.isFormVisible = false;\r\n        alert(\"Movie added sucessfully\");\r\n      } catch (error) {\r\n        console.error(\"Error adding movie: \", error);\r\n      }\r\n    \r\n    },\r\n\r\n    //modala\r\n    async displayMovies(){\r\n      try{\r\n        const response = await fetch('http://localhost:3000/movies');\r\n        if (!response.ok) {\r\n          throw new Error('Network response was not ok');\r\n        }\r\n       const movies = await response.json();\r\n       console.log(\"Filmele primite:\", movies);\r\n       \r\n       this.movies = movies.map(movie => ({\r\n        id: movie.id,\r\n        ...movie,\r\n      posterURL: movie.posterURL \r\n    }));\r\n\r\n    this.filteredMovies = this.movies;\r\n      } catch(error){\r\n        console.error(\"Error displaying movies: \", error);\r\n      }\r\n    },\r\n\r\n    showMovieDetails(movie){\r\n      this.selectedMovie = movie;\r\n    },\r\n\r\n    closeModal(){\r\n      this.selectedMovie = null;\r\n    },\r\n\r\n    formatDate(date){\r\n      if (!date) return 'No date available';\r\n      try {\r\n        const options = { day: '2-digit', month: '2-digit', year: 'numeric' };\r\n        //'en-GB' este pentru zi/luna/an\r\n        return new Date(date).toLocaleDateString('en-GB', options); \r\n    } catch (error) {\r\n      return 'Invalid Date';\r\n    }\r\n    },\r\n\r\n    editMovie(){\r\n      this.isEditing = true;\r\n      this.editedMovie = { ...this.selectedMovie };\r\n    },\r\n\r\n    async saveMovieEdits() {\r\n     try {\r\n      if (!this.selectedMovie.id) return;\r\n\r\n      const movieRef = doc(db, \"movies\", this.selectedMovie.id);\r\n      await updateDoc(movieRef, {\r\n        \"movie.title\": this.editedMovie.title,\r\n        \"movie.genre\": this.editedMovie.genre,\r\n        \"movie.date\": this.editedMovie.date,\r\n        \"movie.score\": this.editedMovie.score,\r\n        \"movie.details\": this.editedMovie.details,\r\n        \"metadata.updatedAt\": serverTimestamp(),\r\n      });\r\n\r\n      Object.assign(this.selectedMovie, this.editedMovie);\r\n      this.isEditing = false;\r\n         } catch (error) {\r\n      console.error(\"Error updating movie:\", error);\r\n        }\r\n      },\r\n\r\n    async deleteMovie() {\r\n      if (!this.selectedMovie || !this.selectedMovie.id) {\r\n          console.error(\"No movie selected or invalid movie ID\");\r\n          return;\r\n      }\r\n\r\n      try {\r\n\r\n        if (!confirm(\"Are you sure you want to delete this movie?\")) {\r\n        return;\r\n      }\r\n\r\n      console.log(\"Attempting to delete movie with ID:\", this.selectedMovie.id);\r\n\r\n      const response = await fetch(`http://localhost:3000/movies/${this.selectedMovie.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        }\r\n      });\r\n\r\n      console.log(\"Delete response status:\", response.status);\r\n\r\n      const responseData = await response.json();\r\n\r\n      if (!response.ok) {\r\n        alert(responseData.error || \"Failed to delete movie\");\r\n        return;\r\n      }\r\n\r\n      const index = this.movies.findIndex(movie => movie.id === this.selectedMovie.id);\r\n      if (index > -1) {\r\n        this.movies.splice(index, 1);\r\n      }\r\n\r\n      this.closeModal();\r\n      console.log('Movie deleted successfully');\r\n      } catch (error) {\r\n        console.error(\"Error deleting movie:\", error);\r\n        alert(\"Failed to delete movie. Please try again.\");\r\n      }\r\n    },\r\n    \r\n    //search\r\n      searching(){\r\n        if(!this.searched){\r\n          this.filteredMovies = this.movies;\r\n        }else{\r\n          const lowerCase = this.searched.toLowerCase();\r\n          this.filteredMovies = this.movies.filter(movie=>\r\n            movie.title.toLowerCase().includes(lowerCase)\r\n          );\r\n        }\r\n      },\r\n\r\n      //filter\r\n\r\n      toggleFilter() {\r\n        this.isFilterVisible = !this.isFilterVisible;\r\n      },\r\n\r\n      applyFilter() {\r\n        if (!this.selectedFilter) {\r\n            this.filteredMovies = this.movies;\r\n        return;\r\n      }\r\n\r\n        if (this.selectedFilter === \"genre\" && this.selectedGenre) {\r\n            this.filteredMovies = this.movies.filter(movie => movie.genre === this.selectedGenre);\r\n        } else {\r\n        this.filteredMovies = this.movies;\r\n         }\r\n      }\r\n\r\n\r\n  },\r\n      watch: {\r\n       searched() {\r\n        this.searching();\r\n      },\r\n       selectedFilter() {\r\n        this.applyFilter();\r\n      },\r\n      selectedGenre() {\r\n        this.applyFilter();\r\n      }\r\n  },\r\n\r\n  //filter\r\n\r\n\r\n      \r\n\r\n};\r\n</script>\r\n\r\n<style src=\"../styles/HomePage.css\"></style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}